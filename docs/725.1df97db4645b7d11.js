"use strict";(self.webpackChunkakllasumaq=self.webpackChunkakllasumaq||[]).push([[725],{8725:(bt,Z,m)=>{m.r(Z),m.d(Z,{AdminModule:()=>vt});var c=m(6860),p=m(6814),s=m(95),t=m(4946),A=m(9483);let C=(()=>{class i{constructor(e){this.authSvc=e}logoutUser(){this.authSvc.logout()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(A.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-sidebar"]],decls:26,vars:0,consts:[["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasResponsive","aria-controls","offcanvasResponsive",1,"btn","btn-primary","d-lg-none","ms-3","mt-3"],[1,"bi","bi-layout-text-sidebar-reverse"],["tabindex","-1","id","offcanvasResponsive","aria-labelledby","offcanvasResponsiveLabel",1,"offcanvas-lg","offcanvas-start","text-bg-dark","admin-sidebar"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[1,"links"],["routerLink","/admin","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive"],["routerLink","/admin/products","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive"],["routerLink","/admin/categories","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive"],["routerLink","/admin/orders","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive"],["routerLink","/admin/users","data-bs-dismiss","offcanvas","data-bs-target","#offcanvasResponsive"],[1,"logout",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"button",0),t._UZ(1,"i",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3),t._UZ(4,"button",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"ul")(8,"li")(9,"a",7),t._uU(10,"Dashboard"),t.qZA()(),t.TgZ(11,"li")(12,"a",8),t._uU(13,"Products"),t.qZA()(),t.TgZ(14,"li")(15,"a",9),t._uU(16,"Categories"),t.qZA()(),t.TgZ(17,"li")(18,"a",10),t._uU(19,"Orders"),t.qZA()(),t.TgZ(20,"li")(21,"a",11),t._uU(22,"Users"),t.qZA()(),t.TgZ(23,"li")(24,"a",12),t.NdJ("click",function(){return o.logoutUser()}),t._uU(25,"Logout"),t.qZA()()()()()())},dependencies:[c.rH]})}return i})(),x=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-shell"]],decls:6,vars:0,consts:[[1,"admin-wrapper"],[1,"row"],[1,"col-lg-2"],[1,"col-lg-10","pt-3"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"router-outlet"),t.qZA()()())},dependencies:[c.lC,C]})}return i})();var g=m(8645),u=m(9773),f=m(2239),_=m(3070);let y=(()=>{class i{constructor(e,r){this.productsSvc=e,this.ordersSvc=r,this.endSubs$=new g.x}ngOnInit(){this._getTotalProducts(),this._getTotalOrders(),this._getTotalSales()}_getTotalProducts(){this.productsSvc.getTotalProducts().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.totalProducts=e})}_getTotalOrders(){this.ordersSvc.getTotalOrders().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.totalOrders=e})}_getTotalSales(){this.ordersSvc.getTotalSales().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.totalSales=e})}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(f.s),t.Y36(_.N))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-dashboard"]],decls:28,vars:3,consts:[[1,"row"],[1,"col-lg-4","mb-3","d-flex","justify-content-center"],[1,"card",2,"width","18rem"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"card-footer"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4),t._uU(5,"Orders"),t.qZA(),t.TgZ(6,"li",4),t._uU(7),t.qZA()(),t.TgZ(8,"div",5),t._uU(9," Orders "),t.qZA()()(),t.TgZ(10,"div",1)(11,"div",2)(12,"ul",3)(13,"li",4),t._uU(14,"Products"),t.qZA(),t.TgZ(15,"li",4),t._uU(16),t.qZA()(),t.TgZ(17,"div",5),t._uU(18," Products "),t.qZA()()(),t.TgZ(19,"div",1)(20,"div",2)(21,"ul",3)(22,"li",4),t._uU(23,"Total Sales"),t.qZA(),t.TgZ(24,"li",4),t._uU(25),t.qZA()(),t.TgZ(26,"div",5),t._uU(27," Total Sales "),t.qZA()()()()),2&r&&(t.xp6(7),t.Oqu(null==o.totalOrders?null:o.totalOrders.orderCount),t.xp6(9),t.Oqu(null==o.totalProducts?null:o.totalProducts.productCount),t.xp6(9),t.Oqu(null==o.totalSales?null:o.totalSales.totalsales[0].totalsales))}})}return i})();var S=m(3519),l=m.n(S),h=m(3197);function F(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"th",14),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"img",15),t.qZA(),t.TgZ(8,"td")(9,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.updateCategory(a._id))}),t._uU(10,"Edit"),t.qZA(),t.TgZ(11,"button",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteCategory(a._id))}),t._uU(12,"Del"),t.qZA()()()()}if(2&i){const e=n.$implicit,r=n.index;t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("src",e.image,t.LSH)}}function w(i,n){if(1&i&&(t.TgZ(0,"div",2)(1,"h5",3),t._uU(2,"Categories"),t.qZA(),t.TgZ(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),t._uU(7,"List of categories"),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Add Category"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),t._uU(18,"Id"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Name"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Image"),t.qZA(),t._UZ(23,"th",12),t.qZA()(),t.YNc(24,F,13,3,"tbody",13),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(24),t.Q6J("ngForOf",e.categories)}}let O=(()=>{class i{constructor(e,r){this.categoriesSvc=e,this.router=r,this.categories=[],this.endSubs$=new g.x}ngOnInit(){this.getCategories()}getCategories(){this.categoriesSvc.getCategories().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.categories=e})}deleteCategory(e){l().fire({title:"Delete Category",text:'Are you sure you want to delete the category"?',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"No, cancel"}).then(r=>{if(r.isConfirmed)this.categoriesSvc.deleteCategory(e).pipe((0,u.R)(this.endSubs$)).subscribe(o=>{this.getCategories()},o=>{l().fire({title:"Error",text:"Failed to delete category",icon:"error",showConfirmButton:!1,timer:3e3})});else if(r.isDismissed)return this.getCategories()})}updateCategory(e){this.router.navigateByUrl(`admin/categories/form/${e}`)}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(h.G),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-categories"]],decls:2,vars:1,consts:[[1,"admin-page"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title"],["routerLink","/admin/categories/form",1,"btn","btn-primary"],[1,"row"],[1,"col-12","table-responsive-md"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["alt","image",2,"width","100px","height","100px",3,"src"],[1,"btn","me-1","mb-1",3,"click"],[1,"btn","mb-1",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,w,25,1,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.categories))},dependencies:[p.sg,p.O5,c.rH]})}return i})();function I(i,n){1&i&&(t.TgZ(0,"div",20),t._uU(1," Name is required. "),t.qZA())}function J(i,n){1&i&&(t.TgZ(0,"div",20),t._uU(1," Icon is required. "),t.qZA())}function N(i,n){1&i&&(t.TgZ(0,"div",20),t._uU(1," Image is required. "),t.qZA())}let v=(()=>{class i{constructor(e,r,o,a){this.formBuilder=e,this.categoriesSvc=r,this.router=o,this.activatedRoute=a,this.isSubmitted=!1,this.editMode=!1,this.currentCategoryId="",this.endSubs$=new g.x}ngOnInit(){this.form=this.formBuilder.group({name:["",s.kI.required],icon:["",s.kI.required],image:["",s.kI.required]}),this._checkEditMode()}onSubmit(){if(this.isSubmitted=!0,!this.form.valid)return;const e=new FormData;Object.keys(this.categoryForm).map(r=>{e.append(r,this.categoryForm[r].value)}),this.editMode?this._updateCategory(e):this._addCategory(e)}onImageUpload(e){const r=e.target?.files[0];if(r){this.form.patchValue({image:r}),this.form.get("image")?.updateValueAndValidity();const o=new FileReader;o.onload=()=>{this.imageDisplay=o.result},o.readAsDataURL(r)}}_checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id?(this.editMode=!0,this.currentCategoryId=e.id,this.categoriesSvc.getCategory(e.id).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{this.categoryForm.name.setValue(r.name),this.categoryForm.icon.setValue(r.icon),this.imageDisplay=r.image,this.categoryForm.image.setValidators([]),this.categoryForm.image.updateValueAndValidity()})):this.editMode=!1})}_addCategory(e){this.categoriesSvc.createCategory(e).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"Category created successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/categories"])})},r=>{l().fire({title:"Error",text:"Failed to create category",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}_updateCategory(e){this.categoriesSvc.updateCategory(e,this.currentCategoryId).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"Category updated successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/categories"])})},r=>{l().fire({title:"Error",text:"Failed to update category",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}get categoryForm(){return this.form.controls}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(s.qu),t.Y36(h.G),t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-categories-form"]],decls:32,vars:8,consts:[[1,"admin-page"],[1,"card"],[1,"card-header",3,"innerHTML"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title",3,"innerHTML"],[1,"btn","btn-primary","me-3",3,"innerHTML","click"],["routerLink","/admin",1,"btn","btn-primary"],[1,"row"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],["for","inputEmail4",1,"form-label"],["formControlName","name","type","text","id","inputEmail4","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inputPassword4",1,"form-label"],["formControlName","icon","type","text","id","inputPassword4",1,"form-control"],["type","file","accept","image/*","id","inputPassword4",1,"form-control",3,"change"],[1,"mt-3"],["alt","",3,"src"],[1,"text-danger"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"h5",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"h5",6),t.TgZ(7,"a",7),t.NdJ("click",function(){return o.onSubmit()}),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Cancel"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",5)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",13),t.YNc(19,I,2,0,"div",14),t.qZA(),t.TgZ(20,"div",11)(21,"label",15),t._uU(22,"Icon"),t.qZA(),t._UZ(23,"input",16),t.YNc(24,J,2,0,"div",14),t.qZA(),t.TgZ(25,"div",11)(26,"label",15),t._uU(27,"Image"),t.qZA(),t.TgZ(28,"input",17),t.NdJ("change",function(d){return o.onImageUpload(d)}),t.qZA(),t.YNc(29,N,2,0,"div",14),t.TgZ(30,"div",18),t._UZ(31,"img",19),t.qZA()()()()()()()()),2&r&&(t.xp6(2),t.Q6J("innerHTML",o.editMode?"Edit Caregory":"Add Category",t.oJD),t.xp6(4),t.Q6J("innerHTML",o.editMode?"You can edit category here":"You can add category here",t.oJD),t.xp6(1),t.Q6J("innerHTML",o.editMode?"Edit":"Create",t.oJD),t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",o.categoryForm.name.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.categoryForm.icon.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.categoryForm.image.invalid&&o.isSubmitted),t.xp6(2),t.Q6J("src",o.imageDisplay,t.LSH))},dependencies:[p.O5,c.rH,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u]})}return i})();function k(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Name is required. "),t.qZA())}function L(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Brand is required. "),t.qZA())}function P(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Price is required. "),t.qZA())}function D(i,n){if(1&i&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function Y(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Category is required. "),t.qZA())}function $(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Count In Stock is required. "),t.qZA())}function M(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Description is required. "),t.qZA())}function Q(i,n){1&i&&(t.TgZ(0,"div",34),t._uU(1," Image is required. "),t.qZA())}let b=(()=>{class i{constructor(e,r,o,a,d){this.formBuilder=e,this.categoriesSvc=r,this.router=o,this.productsSvc=a,this.activatedRoute=d,this.editMode=!1,this.isSubmitted=!1,this.categories=[],this.currentProductId="",this.endSubs$=new g.x}ngOnInit(){this._initForm(),this._getCategories(),this._checkEditMode()}onSubmit(){if(this.isSubmitted=!0,this.form.invalid)return;const e=new FormData;Object.keys(this.productForm).map(r=>{e.append(r,this.productForm[r].value)}),this.editMode?this._updatedProduct(e):this._addProduct(e)}onImageUpload(e){const r=e.target?.files[0];if(r){this.form.patchValue({image:r}),this.form.get("image")?.updateValueAndValidity();const o=new FileReader;o.onload=()=>{this.imageDisplay=o.result},o.readAsDataURL(r)}}_initForm(){this.form=this.formBuilder.group({name:["",s.kI.required],brand:["",s.kI.required],price:["",s.kI.required],category:["",s.kI.required],countInStock:["",s.kI.required],description:["",s.kI.required],richDescription:[""],image:["",s.kI.required],isFeatured:[!1]})}_getCategories(){this.categoriesSvc.getCategories().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.categories=e})}_addProduct(e){this.productsSvc.createProduct(e).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"Product created successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/products"])})},r=>{l().fire({title:"Error",text:"Failed to create product",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}_updatedProduct(e){this.productsSvc.updateProduct(e,this.currentProductId).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"Product updated successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/products"])})},r=>{l().fire({title:"Error",text:"Failed to update product",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}_checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id?(this.editMode=!0,this.currentProductId=e.id,this.productsSvc.getProduct(e.id).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{this.productForm.name.setValue(r.name),this.productForm.brand.setValue(r.brand),this.productForm.price.setValue(r.price),this.productForm.category.setValue(r.category?._id),this.productForm.countInStock.setValue(r.countInStock),this.productForm.description.setValue(r.description),this.productForm.richDescription.setValue(r.richDescription),this.productForm.isFeatured.setValue(r.isFeatured),this.imageDisplay=r.image,this.productForm.image.setValidators([]),this.productForm.image.updateValueAndValidity()})):this.editMode=!1})}get productForm(){return this.form.controls}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(s.qu),t.Y36(h.G),t.Y36(c.F0),t.Y36(f.s),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products-form"]],decls:65,vars:13,consts:[[1,"admin-page"],[1,"card"],[1,"card-header",3,"innerHTML"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title",3,"innerHTML"],[1,"btn","btn-primary","me-3",3,"innerHTML","click"],["routerLink","/admin",1,"btn","btn-primary"],[1,"row"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],["for","inputEmail4",1,"form-label"],["formControlName","name","type","text","id","inputEmail4","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inputPassword4",1,"form-label"],["formControlName","brand","type","text","id","inputPassword4",1,"form-control"],["formControlName","price","type","number","id","inputPassword4","min","0","max","100",1,"form-control"],["for","inputState",1,"form-label"],["formControlName","category","id","inputState",1,"form-select"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","countInStock","type","number","id","inputPassword4","min","0","max","100",1,"form-control"],[1,"col-md-12"],[1,"form-floating"],["formControlName","description","placeholder","Description","id","floatingTextarea",1,"form-control"],["for","floatingTextarea"],["formControlName","richDescription","type","text","id","inputPassword4",1,"form-control"],["type","file","accept","image/*","id","inputPassword4",1,"form-control",3,"change"],[1,"mt-3"],["alt","",3,"src"],[1,"form-check","form-switch"],["formControlName","isFeatured","type","checkbox","role","switch","id","flexSwitchCheckChecked","checked","",1,"form-check-input"],["for","flexSwitchCheckChecked",1,"form-check-label"],[1,"text-danger"],[3,"value"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"h5",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"h5",6),t.TgZ(7,"a",7),t.NdJ("click",function(){return o.onSubmit()}),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Cancel"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",5)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",13),t.YNc(19,k,2,0,"div",14),t.qZA(),t.TgZ(20,"div",11)(21,"label",15),t._uU(22,"Brand"),t.qZA(),t._UZ(23,"input",16),t.YNc(24,L,2,0,"div",14),t.qZA(),t.TgZ(25,"div",11)(26,"label",15),t._uU(27,"Price"),t.qZA(),t._UZ(28,"input",17),t.YNc(29,P,2,0,"div",14),t.qZA(),t.TgZ(30,"div",11)(31,"label",18),t._uU(32,"Category"),t.qZA(),t.TgZ(33,"select",19)(34,"option",20),t._uU(35,"Choose..."),t.qZA(),t.YNc(36,D,2,2,"option",21),t.qZA(),t.YNc(37,Y,2,0,"div",14),t.qZA(),t.TgZ(38,"div",11)(39,"label",15),t._uU(40,"Count In Stock"),t.qZA(),t._UZ(41,"input",22),t.YNc(42,$,2,0,"div",14),t.qZA(),t.TgZ(43,"div",23)(44,"div",24),t._UZ(45,"textarea",25),t.TgZ(46,"label",26),t._uU(47,"Description"),t.qZA()(),t.YNc(48,M,2,0,"div",14),t.qZA(),t.TgZ(49,"div",11)(50,"label",15),t._uU(51,"Rich Description"),t.qZA(),t._UZ(52,"input",27),t.qZA(),t.TgZ(53,"div",11)(54,"label",15),t._uU(55,"Image"),t.qZA(),t.TgZ(56,"input",28),t.NdJ("change",function(d){return o.onImageUpload(d)}),t.qZA(),t.YNc(57,Q,2,0,"div",14),t.TgZ(58,"div",29),t._UZ(59,"img",30),t.qZA()(),t.TgZ(60,"div",11)(61,"div",31),t._UZ(62,"input",32),t.TgZ(63,"label",33),t._uU(64,"Is Featured"),t.qZA()()()()()()()()()),2&r&&(t.xp6(2),t.Q6J("innerHTML",o.editMode?"Edit Product":"Add Product",t.oJD),t.xp6(4),t.Q6J("innerHTML",o.editMode?"You can edit product here":"You can add product here",t.oJD),t.xp6(1),t.Q6J("innerHTML",o.editMode?"Edit":"Create",t.oJD),t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",o.productForm.name.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.productForm.brand.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.productForm.price.invalid&&o.isSubmitted),t.xp6(7),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",o.productForm.category.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.productForm.countInStock.invalid&&o.isSubmitted),t.xp6(6),t.Q6J("ngIf",o.productForm.description.invalid&&o.isSubmitted),t.xp6(9),t.Q6J("ngIf",o.productForm.image.invalid&&o.isSubmitted),t.xp6(2),t.Q6J("src",o.imageDisplay,t.LSH))},dependencies:[p.sg,p.O5,c.rH,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.Wl,s.EJ,s.JJ,s.JL,s.Q7,s.qQ,s.Fd,s.sg,s.u]})}return i})();function R(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"th",14),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"img",15),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td")(19,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.updateProduct(a.id))}),t._uU(20,"Edit"),t.qZA(),t.TgZ(21,"button",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteProduct(a.id))}),t._uU(22,"Del"),t.qZA()()()()}if(2&i){const e=n.$implicit,r=n.index;t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("src",e.image,t.LSH),t.xp6(2),t.Oqu(t.xi3(10,7,e.price,"USD")),t.xp6(3),t.Oqu(e.stock),t.xp6(2),t.Oqu(null==e.category?null:e.category.name),t.xp6(2),t.Oqu(t.lcZ(17,10,e.dateCreated))}}function E(i,n){if(1&i&&(t.TgZ(0,"div",2)(1,"h5",3),t._uU(2,"Products"),t.qZA(),t.TgZ(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),t._uU(7,"List of products"),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Add Product"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),t._uU(18,"#"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Name"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Image"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Price"),t.qZA(),t.TgZ(25,"th",12),t._uU(26,"Stock"),t.qZA(),t.TgZ(27,"th",12),t._uU(28,"Category"),t.qZA(),t.TgZ(29,"th",12),t._uU(30,"Date Created"),t.qZA(),t._UZ(31,"th",12),t.qZA()(),t.YNc(32,R,23,12,"tbody",13),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(32),t.Q6J("ngForOf",e.products)}}let H=(()=>{class i{constructor(e,r){this.productsSvc=e,this.router=r,this.products=[],this.endsSubs$=new g.x}ngOnInit(){this._getProducts()}_getProducts(){this.productsSvc.getProducts().pipe((0,u.R)(this.endsSubs$)).subscribe(e=>{this.products=e})}updateProduct(e){this.router.navigateByUrl(`admin/products/form/${e}`)}deleteProduct(e){l().fire({title:"Delete Product",text:'Are you sure you want to delete the product"?',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"No, cancel"}).then(r=>{if(r.isConfirmed)this.productsSvc.deleteProduct(e).pipe((0,u.R)(this.endsSubs$)).subscribe(o=>{this._getProducts()},o=>{l().fire({title:"Error",text:"Failed to delete product",icon:"error",showConfirmButton:!1,timer:3e3})});else if(r.isDismissed)return this._getProducts()})}ngOnDestroy(){this.endsSubs$.next(),this.endsSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(f.s),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products-list"]],decls:2,vars:1,consts:[[1,"admin-page"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title"],["routerLink","/admin/products/form",1,"btn","btn-primary"],[1,"row"],[1,"col-12","table-responsive-md"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["alt","image",2,"width","100px","height","100px",3,"src"],[1,"btn","me-1","mb-1",3,"click"],[1,"btn","mb-1",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,E,33,1,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.products))},dependencies:[p.sg,p.O5,c.rH,p.H9,p.uU]})}return i})();var B=m(5516),V=m(9862);let T=(()=>{class i{constructor(e){this.http=e,this.apiURLUsers=B.N.api}getUsers(){return this.http.get(`${this.apiURLUsers}users`)}getUser(e){return this.http.get(`${this.apiURLUsers}users/${e}`)}createUser(e){return this.http.post(`${this.apiURLUsers}users`,e)}updateUser(e){return this.http.put(`${this.apiURLUsers}users/${e._id}`,e)}deleteUser(e){return this.http.delete(`${this.apiURLUsers}users/${e}`)}static#t=this.\u0275fac=function(r){return new(r||i)(t.LFG(V.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function G(i,n){1&i&&(t.TgZ(0,"span",18),t._uU(1,"Yes"),t.qZA())}function z(i,n){1&i&&(t.TgZ(0,"span",18),t._uU(1,"No"),t.qZA())}function j(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"th",14),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.YNc(7,G,2,0,"span",15),t.YNc(8,z,2,0,"span",15),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.updateUser(a._id))}),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"button",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteUser(a._id))}),t._uU(15,"Del"),t.qZA()()()()}if(2&i){const e=n.$implicit,r=n.index;t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.isAdmin),t.xp6(1),t.Q6J("ngIf",!e.isAdmin),t.xp6(2),t.Oqu(e.country)}}function K(i,n){if(1&i&&(t.TgZ(0,"div",2)(1,"h5",3),t._uU(2,"Users"),t.qZA(),t.TgZ(3,"div",4)(4,"div",5)(5,"div",6)(6,"h5",7),t._uU(7,"List of users"),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Add Users"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),t._uU(18,"#"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Name"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Is Admin"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Country"),t.qZA(),t._UZ(25,"th",12),t.qZA()(),t.YNc(26,j,16,5,"tbody",13),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(26),t.Q6J("ngForOf",e.users)}}let X=(()=>{class i{constructor(e,r){this.usersSvc=e,this.router=r,this.users=[],this.endSubs$=new g.x}ngOnInit(){this._getUsers()}updateUser(e){this.router.navigateByUrl(`admin/users/form/${e}`)}deleteUser(e){l().fire({title:"Delete User",text:'Are you sure you want to delete the user"?',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"No, cancel"}).then(r=>{if(r.isConfirmed)this.usersSvc.deleteUser(e).pipe((0,u.R)(this.endSubs$)).subscribe(o=>{this._getUsers()},o=>{l().fire({title:"Error",text:"Failed to delete user",icon:"error",showConfirmButton:!1,timer:3e3})});else if(r.isDismissed)return this._getUsers()})}_getUsers(){this.usersSvc.getUsers().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.users=e})}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(T),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-users-list"]],decls:2,vars:1,consts:[[1,"admin-page"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title"],["routerLink","/admin/users/form",1,"btn","btn-primary"],[1,"row"],[1,"col-12","table-responsive-md"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["class","badge text-bg-success",4,"ngIf"],[1,"btn","me-1","mb-1",3,"click"],[1,"btn","mb-1",3,"click"],[1,"badge","text-bg-success"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,K,27,1,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.users))},dependencies:[p.sg,p.O5,c.rH]})}return i})();function W(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Name is required. "),t.qZA())}function tt(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1,"Email is required."),t.qZA())}function et(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1,"Email is invalid."),t.qZA())}function rt(i,n){if(1&i&&(t.TgZ(0,"div",26),t.YNc(1,tt,2,0,"span",27),t.YNc(2,et,2,0,"span",27),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.userForm.email.errors?null:e.userForm.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.userForm.email.errors?null:e.userForm.email.errors.email)}}function it(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Password is required. "),t.qZA())}function ot(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Phone is required. "),t.qZA())}function st(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Admin is required. "),t.qZA())}function nt(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Street is required. "),t.qZA())}function at(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Apartment is required. "),t.qZA())}function dt(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," Zip Code is required. "),t.qZA())}function ct(i,n){1&i&&(t.TgZ(0,"div",26),t._uU(1," City is required. "),t.qZA())}let U=(()=>{class i{constructor(e,r,o,a){this.formBuilder=e,this.activatedRoute=r,this.usersSvc=o,this.router=a,this.editMode=!1,this.isSubmitted=!1,this.currentUserId="",this.endSubs$=new g.x}ngOnInit(){this._initForm(),this._checkEditMode()}onSubmit(){if(this.isSubmitted=!0,!this.form.valid)return;const e={_id:this.currentUserId,name:this.form.controls.name.value,email:this.form.controls.email.value,phone:this.form.controls.phone.value,isAdmin:this.form.controls.isAdmin.value,street:this.form.controls.street.value,apartment:this.form.controls.apartment.value,zip:this.form.controls.zip.value,city:this.form.controls.city.value};this.editMode?this._updateUser(e):this._addUser(e)}_initForm(){this.form=this.formBuilder.group({name:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],password:["",s.kI.required],phone:["",s.kI.required],isAdmin:[!1],street:[""],apartment:[""],zip:[""],city:[""]})}_checkEditMode(){this.activatedRoute.params.subscribe(e=>{e.id?(this.editMode=!0,this.currentUserId=e.id,this.usersSvc.getUser(e.id).subscribe(r=>{this.userForm.name.setValue(r.name),this.userForm.email.setValue(r.email),this.userForm.isAdmin.setValue(r.isAdmin),this.userForm.street.setValue(r.street),this.userForm.apartment.setValue(r.apartment),this.userForm.zip.setValue(r.zip),this.userForm.city.setValue(r.city),this.userForm.password.setValidators([]),this.userForm.password.updateValueAndValidity()})):this.editMode=!1})}_addUser(e){this.usersSvc.createUser(e).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"User created successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/users"])})},r=>{l().fire({title:"Error",text:"Failed to create user",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}_updateUser(e){this.usersSvc.updateUser(e).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"User updated successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{this.router.navigate(["/admin/users"])})},r=>{l().fire({title:"Error",text:"Failed to update user",icon:"error",showConfirmButton:!1,timer:3e3}),this.form.reset()})}get userForm(){return this.form.controls}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(s.qu),t.Y36(c.gz),t.Y36(T),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-users-form"]],decls:61,vars:13,consts:[[1,"admin-page"],[1,"card"],[1,"card-header",3,"innerHTML"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title",3,"innerHTML"],[1,"btn","btn-primary","me-3",3,"innerHTML","click"],["routerLink","/admin",1,"btn","btn-primary"],[1,"row"],[1,"row","g-3",3,"formGroup"],[1,"col-md-6"],["for","inputEmail4",1,"form-label"],["formControlName","name","type","text","id","inputEmail4","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inputPassword4",1,"form-label"],["formControlName","email","type","text","id","inputPassword4",1,"form-control"],["formControlName","password","type","password","id","inputPassword4",1,"form-control"],["formControlName","phone","type","text","id","inputPassword4",1,"form-control"],[1,"form-check","form-switch"],["formControlName","isAdmin","type","checkbox","role","switch","id","flexSwitchCheckChecked","checked","",1,"form-check-input"],["for","flexSwitchCheckChecked",1,"form-check-label"],["formControlName","street","type","text","id","inputPassword4",1,"form-control"],["formControlName","apartment","type","text","id","inputPassword4",1,"form-control"],["formControlName","zip","type","text","id","inputPassword4",1,"form-control"],["formControlName","city","type","text","id","inputPassword4",1,"form-control"],[1,"text-danger"],[4,"ngIf"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"h5",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"h5",6),t.TgZ(7,"a",7),t.NdJ("click",function(){return o.onSubmit()}),t.qZA(),t.TgZ(8,"a",8),t._uU(9,"Cancel"),t.qZA()()(),t._UZ(10,"hr")(11,"hr"),t.TgZ(12,"div",9)(13,"div",5)(14,"form",10)(15,"div",11)(16,"label",12),t._uU(17,"Name"),t.qZA(),t._UZ(18,"input",13),t.YNc(19,W,2,0,"div",14),t.qZA(),t.TgZ(20,"div",11)(21,"label",15),t._uU(22,"Email"),t.qZA(),t._UZ(23,"input",16),t.YNc(24,rt,3,2,"div",14),t.qZA(),t.TgZ(25,"div",11)(26,"label",15),t._uU(27,"Password"),t.qZA(),t._UZ(28,"input",17),t.YNc(29,it,2,0,"div",14),t.qZA(),t.TgZ(30,"div",11)(31,"label",15),t._uU(32,"Phone"),t.qZA(),t._UZ(33,"input",18),t.YNc(34,ot,2,0,"div",14),t.qZA(),t.TgZ(35,"div",11)(36,"div",19),t._UZ(37,"input",20),t.TgZ(38,"label",21),t._uU(39,"Is Admin"),t.qZA()(),t.YNc(40,st,2,0,"div",14),t.qZA(),t.TgZ(41,"div",11)(42,"label",15),t._uU(43,"Street"),t.qZA(),t._UZ(44,"input",22),t.YNc(45,nt,2,0,"div",14),t.qZA(),t.TgZ(46,"div",11)(47,"label",15),t._uU(48,"Apartment"),t.qZA(),t._UZ(49,"input",23),t.YNc(50,at,2,0,"div",14),t.qZA(),t.TgZ(51,"div",11)(52,"label",15),t._uU(53,"Zip Code"),t.qZA(),t._UZ(54,"input",24),t.YNc(55,dt,2,0,"div",14),t.qZA(),t.TgZ(56,"div",11)(57,"label",15),t._uU(58,"City"),t.qZA(),t._UZ(59,"input",25),t.YNc(60,ct,2,0,"div",14),t.qZA()()()()()()()),2&r&&(t.xp6(2),t.Q6J("innerHTML",o.editMode?"Edit User":"Add User",t.oJD),t.xp6(4),t.Q6J("innerHTML",o.editMode?"You can edit user here":"You can add user here",t.oJD),t.xp6(1),t.Q6J("innerHTML",o.editMode?"Edit":"Create",t.oJD),t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",o.userForm.name.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.email.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.password.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.phone.invalid&&o.isSubmitted),t.xp6(6),t.Q6J("ngIf",o.userForm.isAdmin.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.street.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.apartment.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.zip.invalid&&o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.userForm.city.invalid&&o.isSubmitted))},dependencies:[p.O5,c.rH,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.Q7,s.sg,s.u]})}return i})();const q=[{label:"Pending",color:"primary"},{label:"Processed",color:"warning"},{label:"Shipped",color:"info"},{label:"Delivered",color:"success"},{label:"Failed",color:"danger"}];function ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"th",10),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"span",11),t.qZA(),t.TgZ(13,"td")(14,"button",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.showOrder(a._id))}),t._uU(15,"Show"),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteOrder(a._id))}),t._uU(17,"Del"),t.qZA()()()()}if(2&i){const e=n.$implicit,r=n.index,o=t.oxw(2);t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Oqu(e.user),t.xp6(2),t.Oqu(e.totalPrice),t.xp6(2),t.Oqu(t.xi3(10,6,e.dateOrdered,"short")),t.xp6(3),t.Q6J("ngClass","badge text-bg-"+o.orderStatus[o.parseStatusIndex(e.status)].color)("innerHTML",o.orderStatus[o.parseStatusIndex(e.status)].label,t.oJD)}}function lt(i,n){if(1&i&&(t.TgZ(0,"div",2)(1,"h5",3),t._uU(2,"Orders"),t.qZA(),t.TgZ(3,"div",4)(4,"div",5)(5,"div",6)(6,"table",7)(7,"thead")(8,"tr")(9,"th",8),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",8),t._uU(12,"User"),t.qZA(),t.TgZ(13,"th",8),t._uU(14,"Total Price"),t.qZA(),t.TgZ(15,"th",8),t._uU(16,"Date Ordered"),t.qZA(),t.TgZ(17,"th",8),t._uU(18,"Status"),t.qZA(),t._UZ(19,"th",8),t.qZA()(),t.YNc(20,ut,18,9,"tbody",9),t.qZA()()()()()),2&i){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.orders)}}let pt=(()=>{class i{constructor(e,r){this.ordersSvc=e,this.router=r,this.orders=[],this.orderStatus=q,this.endSubs$=new g.x}ngOnInit(){this._getOrders()}showOrder(e){this.router.navigateByUrl(`admin/orders/${e}`)}deleteOrder(e){l().fire({title:"Delete Order",text:'Are you sure you want to delete the order"?',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"No, cancel"}).then(r=>{if(r.isConfirmed)this.ordersSvc.deleteOrder(e).pipe((0,u.R)(this.endSubs$)).subscribe(o=>{this._getOrders()},o=>{l().fire({title:"Error",text:"Failed to delete order",icon:"error",showConfirmButton:!1,timer:3e3})});else if(r.isDismissed)return this._getOrders()})}parseStatusIndex(e){const r=+e;return isNaN(r)?-1:r}_getOrders(){this.ordersSvc.getOrders().pipe((0,u.R)(this.endSubs$)).subscribe(e=>{this.orders=e})}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(_.N),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-orders-list"]],decls:2,vars:1,consts:[[1,"admin-page"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12","table-responsive-md"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[3,"ngClass","innerHTML"],[1,"btn","me-1","mb-1",3,"click"],[1,"btn","mb-1",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,lt,21,1,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.orders))},dependencies:[p.mk,p.sg,p.O5,p.uU]})}return i})();function mt(i,n){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",n.index),t.xp6(1),t.hij(" ",e.label," ")}}function gt(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"th",31),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"currency"),t.qZA()()),2&i){const e=n.$implicit,r=n.index,o=t.oxw(2);t.xp6(2),t.Oqu(r+1),t.xp6(2),t.Oqu(null==e||null==e.product?null:e.product.name),t.xp6(2),t.Oqu(null==e||null==e.product?null:e.product.brand),t.xp6(2),t.Oqu(null==e||null==e.product||null==e.product.category?null:e.product.category.name),t.xp6(2),t.Oqu(t.lcZ(11,7,null==e||null==e.product?null:e.product.price)),t.xp6(3),t.Oqu(null==e?null:e.quantity),t.xp6(2),t.hij(" ",t.lcZ(16,9,o.calculateTotalPrice(e))," ")}}function ht(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"h5",3),t.TgZ(2,"div",4)(3,"div",5)(4,"div",6),t._UZ(5,"h5",7),t.qZA()(),t._UZ(6,"hr")(7,"hr"),t.TgZ(8,"div",8)(9,"div",6)(10,"div",9)(11,"div",10)(12,"h2",11)(13,"button",12),t._uU(14," Order details "),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14)(17,"div",8)(18,"div",15)(19,"label",16),t._uU(20,"Order ID:"),t.qZA(),t.TgZ(21,"p",17),t._uU(22),t.qZA()(),t.TgZ(23,"div",15)(24,"label",16),t._uU(25,"Order Date:"),t.qZA(),t.TgZ(26,"p",17),t._uU(27),t.ALo(28,"date"),t.qZA()(),t.TgZ(29,"div",15)(30,"label",16),t._uU(31,"Order Status:"),t.qZA(),t.TgZ(32,"select",18),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onStatusChange(o))})("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.statusChanged=o)}),t.YNc(33,mt,2,2,"option",19),t.qZA()(),t.TgZ(34,"div",20)(35,"label",16),t._uU(36,"Order Total Price:"),t.qZA(),t.TgZ(37,"p",17),t._uU(38),t.ALo(39,"currency"),t.qZA()()()()()(),t.TgZ(40,"div",10)(41,"h2",11)(42,"button",21),t._uU(43," Order Items "),t.qZA()(),t.TgZ(44,"div",22)(45,"div",23)(46,"table",24)(47,"thead")(48,"tr")(49,"th",25),t._uU(50,"#"),t.qZA(),t.TgZ(51,"th",25),t._uU(52,"Name"),t.qZA(),t.TgZ(53,"th",25),t._uU(54,"Brand"),t.qZA(),t.TgZ(55,"th",25),t._uU(56,"Category"),t.qZA(),t.TgZ(57,"th",25),t._uU(58,"Price"),t.qZA(),t.TgZ(59,"th",25),t._uU(60,"Quantity"),t.qZA(),t.TgZ(61,"th",25),t._uU(62,"Subtotal"),t.qZA()()(),t.TgZ(63,"tbody"),t.YNc(64,gt,17,11,"tr",26),t.qZA(),t.TgZ(65,"tfoot")(66,"td"),t._uU(67),t.ALo(68,"currency"),t.qZA()()()()()(),t.TgZ(69,"div",10)(70,"h2",11)(71,"button",27),t._uU(72," Order Address "),t.qZA()(),t.TgZ(73,"div",28)(74,"div",29)(75,"div",8)(76,"div",15)(77,"label",16),t._uU(78,"Order Address:"),t.qZA(),t.TgZ(79,"p",17),t._uU(80),t._UZ(81,"br"),t._uU(82),t._UZ(83,"br"),t._uU(84),t.qZA()(),t.TgZ(85,"div",15)(86,"label",16),t._uU(87,"Customer Name:"),t.qZA(),t.TgZ(88,"p",17),t._uU(89),t.qZA()(),t.TgZ(90,"div",15)(91,"label",16),t._uU(92,"Customer Email & Phone:"),t.qZA(),t.TgZ(93,"p",17),t._uU(94),t.qZA()()()()()()()()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("innerHTML","View Order",t.oJD),t.xp6(4),t.Q6J("innerHTML","You can update the status here",t.oJD),t.xp6(17),t.Oqu(e.orderDetails._id),t.xp6(5),t.Oqu(t.xi3(28,16,e.orderDetails.dateOrdered,"short")),t.xp6(5),t.Q6J("ngModel",e.statusChanged),t.xp6(1),t.Q6J("ngForOf",e.orderStatus),t.xp6(5),t.Oqu(t.lcZ(39,19,e.orderDetails.totalPrice)),t.xp6(26),t.Q6J("ngForOf",e.orderDetails.orderItems),t.xp6(3),t.hij("Total: ",t.lcZ(68,21,e.orderDetails.totalPrice),""),t.xp6(13),t.hij(" ",e.orderDetails.shippingAddress1," "),t.xp6(2),t.lnq(" ",e.orderDetails.shippingAddress2," ",e.orderDetails.zip," ",e.orderDetails.city," "),t.xp6(2),t.hij(" ",e.orderDetails.country," "),t.xp6(5),t.Oqu(e.orderDetails.user),t.xp6(5),t.Oqu(e.orderDetails.phone)}}let ft=(()=>{class i{constructor(e,r,o){this.ordersSvc=e,this.activatedRoute=r,this.router=o,this.orderStatus=q,this.endSubs$=new g.x}ngOnInit(){this.activatedRoute.params.subscribe(e=>{e.id&&(this.orderId=e.id,this._getOrder(this.orderId))})}_getOrder(e){this.ordersSvc.getOrder(e).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{this.orderDetails=r,this.statusChanged=this.orderDetails.status,console.log(this.orderDetails)})}onStatusChange(e){this.ordersSvc.updateOrder({status:e.target.value},this.orderId).pipe((0,u.R)(this.endSubs$)).subscribe(r=>{l().fire({title:"Success",text:"Order updated successfully",icon:"success",showConfirmButton:!1,timer:3e3}).then(()=>{})},r=>{l().fire({title:"Error",text:"Failed to update order",icon:"error",showConfirmButton:!1,timer:3e3})})}calculateTotalPrice(e){return(e.product?.price||0)*(e.quantity||0)}parseStatusIndex(e){const r=+e;return isNaN(r)?-1:r}ngOnDestroy(){this.endSubs$.next(),this.endSubs$.complete()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(_.N),t.Y36(c.gz),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-orders-detail"]],decls:2,vars:1,consts:[[1,"admin-page"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header",3,"innerHTML"],[1,"card-body"],[1,"row","mb-3"],[1,"col-12"],[1,"card-title",3,"innerHTML"],[1,"row"],["id","accordionFlushExample",1,"accordion","accordion-flush"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseOne","aria-expanded","false","aria-controls","flush-collapseOne",1,"accordion-button","collapsed"],["id","flush-collapseOne","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse","mt-3"],[1,"accordion"],[1,"form-group","col-md-4"],["for","orderId"],["id","orderId"],[1,"form-select",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-4"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseTwo","aria-expanded","false","aria-controls","flush-collapseTwo",1,"accordion-button","collapsed"],["id","flush-collapseTwo","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"accordion-body","table-responsive"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","data-bs-toggle","collapse","data-bs-target","#flush-collapseThree","aria-expanded","false","aria-controls","flush-collapseThree",1,"accordion-button","collapsed"],["id","flush-collapseThree","data-bs-parent","#accordionFlushExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[3,"value"],["scope","row"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,ht,95,23,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.orderDetails))},dependencies:[p.sg,p.O5,s.YN,s.Kr,s.EJ,s.JJ,s.On,p.H9,p.uU]})}return i})();var _t=m(6718);const Zt=[{path:"",component:x,canActivate:[(i,n)=>{const e=(0,t.f3M)(c.F0),o=(0,t.f3M)(_t.g).getToken();if(o){const d=JSON.parse(atob(o.split(".")[1]));if(d.isAdmin&&!(d=>Math.floor((new Date).getTime())/1e3>=d)(d.exp))return!0}return e.navigateByUrl("login"),!1}],children:[{path:"",component:y},{path:"categories",component:O},{path:"categories/form",component:v},{path:"categories/form/:id",component:v},{path:"products",component:H},{path:"products/form",component:b},{path:"products/form/:id",component:b},{path:"users",component:X},{path:"users/form",component:U},{path:"users/form/:id",component:U},{path:"orders",component:pt},{path:"orders/:id",component:ft}]}];let vt=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({providers:[h.G],imports:[p.ez,c.Bz.forChild(Zt),s.u5,s.UX]})}return i})()}}]);